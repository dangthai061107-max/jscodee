<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
            let booksId = [];
            let booksName = [];
            let bookStatus = [];

            function chuyenTinhTrang(luaChon) {
                if (luaChon === 1) return "Hỏng nhẹ";
                if (luaChon === 2) return "Hỏng nặng";
                if (luaChon === 3) return "Cần sửa gấp";
                if (luaChon === 4) return "Đã sửa xong";
                if (luaChon === 5) return "Loại bỏ";
                return "";
            }

            let soSach = parseInt(prompt("Có bao nhiêu cuốn sách cần kiểm tra tình trạng hôm nay?"));

            for (let i = 0; i < soSach; i++) {

                let maSach;
                do {
                    maSach = prompt("Nhập mã sách thứ " + (i + 1) + ":");
                } while (maSach === "");

                let tenSach;
                do {
                    tenSach = prompt("Nhập tên sách thứ " + (i + 1) + ":");
                } while (tenSach === "");

                let tinhTrangSo;
                do {
                    tinhTrangSo = parseInt(
                        prompt(
                            "Nhập tình trạng ban đầu:\n" +
                            "1. Hỏng nhẹ\n" +
                            "2. Hỏng nặng\n" +
                            "3. Cần sửa gấp"
                        )
                    );
                } while (tinhTrangSo < 1 || tinhTrangSo > 3);

                booksId.push(maSach);
                booksName.push(tenSach);
                bookStatus.push(chuyenTinhTrang(tinhTrangSo));
            }

            function inDanhSach() {
                console.log("Danh sách sách hiện tại:");
                if (booksId.length === 0) {
                    console.log("Danh sách trống.");
                    return;
                }

                for (let i = 0; i < booksId.length; i++) {
                    console.log(
                        (i + 1) + ". " +
                        "Mã: " + booksId[i] +
                        " | Tên: " + booksName[i] +
                        " | Tình trạng: " + bookStatus[i]
                    );
                }
            }

            inDanhSach();

            while (true) {
                let luaChon = parseInt(
                    prompt(
                        "Bạn muốn làm gì?\n" +
                        "1. Sửa tình trạng sách\n" +
                        "2. Loại bỏ (xóa) sách\n" +
                        "0. Kết thúc và in báo cáo"
                    )
                );

                if (luaChon === 0) {
                    break;
                }

                if (luaChon === 1) {
                    let maCanSua = prompt("Nhập mã sách cần sửa:");
                    let timThay = -1;

                    for (let i = 0; i < booksId.length; i++) {
                        if (booksId[i] === maCanSua) {
                            timThay = i;
                            break;
                        }
                    }

                    if (timThay === -1) {
                        console.log("Không tìm thấy mã sách.");
                    } else {
                        let trangThaiMoi;
                        do {
                            trangThaiMoi = parseInt(
                                prompt(
                                    "Chọn tình trạng mới:\n" +
                                    "1. Hỏng nhẹ\n" +
                                    "2. Hỏng nặng\n" +
                                    "3. Cần sửa gấp\n" +
                                    "4. Đã sửa xong\n" +
                                    "5. Loại bỏ"
                                )
                            );
                        } while (trangThaiMoi < 1 || trangThaiMoi > 5);

                        bookStatus[timThay] = chuyenTinhTrang(trangThaiMoi);
                        console.log("Đã cập nhật tình trạng.");
                    }

                    inDanhSach();
                }

                else if (luaChon === 2) {
                    let maCanXoa = prompt("Nhập mã sách cần xóa:");
                    let viTri = -1;

                    for (let i = 0; i < booksId.length; i++) {
                        if (booksId[i] === maCanXoa) {
                            viTri = i;
                            break;
                        }
                    }

                    if (viTri === -1) {
                        console.log("Không tìm thấy mã sách.");
                    } else {
                        booksId.splice(viTri, 1);
                        booksName.splice(viTri, 1);
                        bookStatus.splice(viTri, 1);
                        console.log("Đã xóa sách khỏi danh sách.");
                    }

                    inDanhSach();
                }
            }

            let demDaSuaXong = 0;
            let demLoaiBo = 0;

            for (let i = 0; i < bookStatus.length; i++) {
                if (bookStatus[i] === "Đã sửa xong") demDaSuaXong++;
                if (bookStatus[i] === "Loại bỏ") demLoaiBo++;
            }

            console.log("===== BÁO CÁO CUỐI =====");
            console.log("Tổng số sách còn lại: " + booksId.length);
            console.log("Số sách đã sửa xong: " + demDaSuaXong);
            console.log("Số sách loại bỏ: " + demLoaiBo);

            console.log("Danh sách sách còn lại:");
            inDanhSach();

    </script>
</body>
</html>